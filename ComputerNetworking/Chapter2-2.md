### Chapter 2 应用层

#### 2.3 因特网中的电子邮件

​	因特网电子邮件有3个主要部分组成：用户代理、邮件服务器和简单邮件传输协议（SMTP）。邮件服务器形成电子邮件体系结构的核心。

​	典型的邮件收发过程：从发送方的用户代理开始，传输到发送发邮件服务器，再传输到接收方邮件服务器，然后在这里被分发到接收方的邮箱中。

​	SMTP协议也有两部分：运行在发送方邮件服务器的客户端和在接收方邮件服务器的服务器端。

 1. SMTP

    SMTP是因特网电子邮件的核心，SMTP一般不使用中间邮件服务器发送邮件，

 2. 与HTTP的对比

    HTTP主要是一个拉协议，SMTP基本上是一个推协议；

    HTTP把么一个对象封装到响应报文中，SMTP则把所有的报文对象放在一个报文中

 3. 邮件报文格式

    首部行和该报文的体用空行（即回车换行）进行分割，每个首部行包含了刻度的文本，由关键词后跟冒号及其值组成的。

    每个首部行必须包含有一个From：首部行和一个To:首部行。

 4. 邮件访问协议

    第三版的邮局协议（POP3）、因特网邮件访问协议（IMAP）以及HTTP

#### 2.4 DNS：因特网的目录服务

​	因特网的主机可以使用多种方式进行标识，如：主机名、IP地址等。

1. DNS提供的服务

   域名系统（DNS）是一种能进行主机名到IP地址转换的目录服务。

   DNS是：1.一个分层的DNS服务器实现的分布式数据库；2.一个是的主机能够查询分布式数据库的应用层协议。

   DNS协议运行在UDP之上，使用53端口号。

   DNS还提供可一些重要的其他服务：主机别名、邮件服务器别名、负载分配。

2. DNS工作原理概述

   + 分布式、层次数据库

     有三种类型的DNS服务器：根DNS服务器、顶级域（DNS）服务器、权威DNS服务器。

   + DNS缓存

     在一个请求链中，当某DNS服务器接收一个DNS应答时，它能将映射缓存在本地存储器中

3. DNS记录和报文

   共同实现DNS分布式数据库的所有DNS服务器存储了资源记录(RR),RR提供了主机名到IP地址的映射。

   + DNS报文： DNS只有两种报文，查询报文和回答报文，两种报文有着相同的格式。
   + 在DNS数据库中插入记录： 域名注册登记机构是一个商业实体，它验证域名的唯一性，并将该域名输入DNS数据库。

#### 2.5 P2P文件分发

​	分发开始只有服务器有文件，服务器将文件分发一次之后，对等方可以帮助分发文件。就是一个节点获取到数据后可以帮助服务器将数据分发给其他节点。

​	BitTorrent是一种用于文件分发的P2P协议。利用最稀缺优先技术优先传输网络中最稀缺的资源，使该资源得到最快的分发。使用兑换算法，保证最大化的传输速率。

#### 2.6 视频流和内容分发网

​	HTTP流和DASH（经HTTP的动态适应性流）

​	内容分发网（CDN）